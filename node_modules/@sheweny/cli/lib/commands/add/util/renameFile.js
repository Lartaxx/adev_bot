"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.renameFile = void 0;
const fs_1 = require("fs");
const path_1 = require("path");
async function renameFile(file, options) {
    let fileName = `${file.toLowerCase()}${options.config.template === "javascript" ? ".js" : ".ts"}`;
    const pathFile = (0, path_1.join)(options.target, fileName);
    if ((0, fs_1.existsSync)(pathFile)) {
        const reg = new RegExp(/\_[0-9]{1,2}/);
        const match = file.match(reg);
        if (match && match.index === file.length - match[0].length) {
            const number = parseInt(file.substring(match.index + 1, file.length)) + 1;
            file = file.replace(reg, `_${number}`);
            return renameFile(file, options);
        }
        else {
            file += "_1";
            return renameFile(file, options);
        }
    }
    else
        return fileName;
}
exports.renameFile = renameFile;
